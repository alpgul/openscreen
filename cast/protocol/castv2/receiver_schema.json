{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://something/app_schema.json",
  "definitions": {
    "app_id": {"type": "string", "pattern": "[0-9a-fA-F]{8}"},
    "volume": {
      "type": "object",
      "properties": {
        "controlType": {"type": "string", "enum": ["attenuation"]},
        "level": {"type": "number", "minimum": 0, "maximum": 1},
        "muted": {"type": "boolean"},
        "stepInterval": {"type": "number"}
      },
      "required": ["controlType", "level", "muted"]
    },
    "application": {
      "type": "object",
      "properties": {
        "appId": {"$ref": "#/definitions/app_id"},
        "displayName": {"type": "string"},
        "sessionId": {"type": "string"},
        "statusText": {"type": "string"},
        "transportId": {"type": "string"},
        "isIdleScreen": {"type": "boolean"},
        "launchedFromCloud": {"type": "boolean"},
        "namespaces": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {"name": {"type": "string"}},
            "required": ["name"]
          }
        }
      },
      "required": ["appId", "displayName", "sessionId", "transportId"]
    },
    "status": {
      "type": "object",
      "properties": {
        "applications": {
          "type": "array",
          "items": {"$ref": "#/definitions/application"}
        },
        "volume": {"$ref": "#/definitions/volume"},
        "userEq": {"type": "object"}
      },
      "required": ["volume"]
    },
    "media_status_item": {
      "type": "object",
      "properties": {
        "mediaSessionId": {"type": "integer"},
        "playbackRate": {"type": "number"},
        "playerState": {"type": "string", "enum": ["IDLE", "PLAYING", "PAUSED", "BUFFERING"]},
        "currentTime": {"type": "number"},
        "supportedMediaCommands": {"type": "integer"},
        "volume": {"$ref": "#/definitions/volume"},
        "media": {
          "type": "object",
          "properties": {
            "contentId": {"type": "string"},
            "streamType": {"type": "string", "enum": ["BUFFERED", "LIVE"]},
            "contentType": {"type": "string"}
          },
          "required": ["contentId", "streamType", "contentType"]
        }
      },
      "required": ["mediaSessionId", "playerState", "currentTime", "supportedMediaCommands", "volume", "media"]
    }
  },
  "oneOf": [
    {
      "title": "LAUNCH",
      "properties": {
        "type": {"const": "LAUNCH"},
        "requestId": {"type": "integer"},
        "appId": {"$ref": "#/definitions/app_id"}
      },
      "required": ["type", "requestId", "appId"]
    },
    {
      "title": "STOP",
      "properties": {
        "type": {"const": "STOP"},
        "requestId": {"type": "integer"},
        "sessionId": {"type": "string"}
      },
      "required": ["type", "requestId", "sessionId"]
    },
    {
      "title": "GET_APP_AVAILABILITY Request",
      "properties": {
        "type": {"const": "GET_APP_AVAILABILITY"},
        "requestId": {"type": "integer"},
        "appId": {"type": "array", "items": {"$ref": "#/definitions/app_id"}}
      },
      "required": ["type", "requestId", "appId"]
    },
    {
      "title": "GET_APP_AVAILABILITY Response",
      "properties": {
        "responseType": {"const": "GET_APP_AVAILABILITY"},
        "requestId": {"type": "integer"},
        "availability": {
          "type": "object",
          "patternProperties": {
            "^[0-9a-fA-F]{8}$": {"type": "string", "enum": ["APP_AVAILABLE", "APP_UNAVAILABLE"]}
          }
        }
      },
      "required": ["responseType", "requestId", "availability"]
    },
    {
      "title": "GET_STATUS",
      "properties": {
        "type": {"const": "GET_STATUS"},
        "requestId": {"type": "integer"}
      },
      "required": ["type", "requestId"]
    },
    {
      "title": "RECEIVER_STATUS",
      "properties": {
        "responseType": {"const": "RECEIVER_STATUS"},
        "requestId": {"type": "integer"},
        "status": {"$ref": "#/definitions/status"}
      },
      "required": ["responseType", "requestId", "status"]
    },
    {
      "title": "LAUNCH_STATUS",
      "properties": {
        "responseType": {"const": "LAUNCH_STATUS"},
        "launchRequestId": {"type": "integer"},
        "status": {"type": "string", "const": "USER_ALLOWED"}
      },
      "required": ["responseType", "launchRequestId", "status"]
    },
    {
      "title": "LAUNCH_ERROR",
      "properties": {
        "responseType": {"const": "LAUNCH_ERROR"},
        "requestId": {"type": "integer"},
        "reason": {"type": "string"}
      },
      "required": ["responseType", "requestId", "reason"]
    },
    {
      "title": "INVALID_REQUEST",
      "properties": {
        "responseType": {"const": "INVALID_REQUEST"},
        "requestId": {"type": "integer"},
        "reason": {"type": "string"}
      },
      "required": ["responseType", "requestId", "reason"]
    },
    {
      "title": "MEDIA_STATUS",
      "properties": {
        "responseType": {"const": "MEDIA_STATUS"},
        "requestId": {"type": "integer"},
        "media": {"type": "array", "items": {"$ref": "#/definitions/media_status_item"}}
      },
      "required": ["responseType", "requestId", "media"]
    },
    {
      "title": "GET_DEVICE_INFO Request",
      "properties": {
        "type": {"const": "GET_DEVICE_INFO"},
        "requestId": {"type": "integer"}
      },
      "required": ["type", "requestId"],
      "additionalProperties": false
    },
    {
      "title": "GET_DEVICE_INFO Response",
      "properties": {
        "type": {"const": "GET_DEVICE_INFO"},
        "requestId": {"type": "integer"},
        "deviceId": {"type": "string"},
        "friendlyName": {"type": "string"},
        "deviceModel": {"type": "string"},
        "capabilities": {"type": "integer"},
        "controlNotifications": {"type": "integer"}
      },
      "required": ["type", "requestId", "deviceId", "friendlyName", "deviceModel", "capabilities", "controlNotifications"]
    },
    {
      "title": "EUREKA_INFO",
      "properties": {
        "type": {"const": "eureka_info"},
        "request_id": {"type": "integer"},
        "response_code": {"type": "integer"},
        "response_string": {"type": "string"},
        "data": {
          "type": "object",
          "properties": {
            "name": {"type": "string"},
            "version": {"type": "integer"}
          }
        }
      },
      "required": ["type", "request_id", "response_code", "response_string", "data"]
    }
  ]
}
